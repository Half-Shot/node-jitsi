import { Parser } from "@xmpp/xml";
import { Jingle2SDP } from "../src/JingleSDP";

const parser = new Parser();
parser.on("element", (e) => {
    if (e.is("jingle")) {
        const res = Jingle2SDP(e, "responder", "inbound");
        console.log(res);
    }
})
parser.write(Buffer.from(`<body><jingle sid="4vh9fphffq79r" action="session-initiate" xmlns="urn:xmpp:jingle:1" initiator="focus@auth.jitsi.modular.im/focus1015443606079066"><content creator="initiator" name="audio" senders="both"><description maxptime="60" xmlns="urn:xmpp:jingle:apps:rtp:1" media="audio"><payload-type name="opus" channels="2" clockrate="48000" id="111"><parameter value="10" name="minptime"/><parameter value="1" name="useinbandfec"/><rtcp-fb type="transport-cc" xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"/></payload-type><payload-type clockrate="16000" id="103" name="ISAC"/><payload-type clockrate="32000" id="104" name="ISAC"/><payload-type clockrate="8000" id="126" name="telephone-event"/><rtp-hdrext uri="urn:ietf:params:rtp-hdrext:ssrc-audio-level" id="1" xmlns="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0"/><rtp-hdrext uri="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01" id="5" xmlns="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0"/><rtcp-mux/><source ssrc="1422763741" xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"><parameter value="mixed" name="cname"/><parameter value="mixedlabelaudio0" name="label"/><parameter value="mixedmslabel mixedlabelaudio0" name="msid"/><parameter value="mixedmslabel" name="mslabel"/><ssrc-info owner="jvb" xmlns="http://jitsi.org/jitmeet"/></source><source ssrc="1882926326" xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"><parameter name="cname" value="O9MllgKixBP1gJG6-2"/><parameter name="msid" value="58a626f8-a79e-4d51-af9f-3cdf41a34a60-2 7b2d0201-a967-47f0-839b-b745e9722f2a-2"/><ssrc-info owner="testingbridge2@conference.jitsi.modular.im/da019f78" xmlns="http://jitsi.org/jitmeet"/></source></description><transport ufrag="6ddqb1e4oq7oc3" pwd="4f734prgpajhk53aqjovijirf" xmlns="urn:xmpp:jingle:transports:ice-udp:1"><rtcp-mux/><fingerprint hash="sha-1" xmlns="urn:xmpp:jingle:apps:dtls:0" required="false" setup="actpass">75:2F:1A:44:CD:9F:61:3B:57:52:3D:A3:08:85:B5:F1:4B:4A:54:9C</fingerprint><candidate foundation="1" component="1" type="host" ip="2a04:3541:1000:500:6866:a4ff:fe4c:2b05" network="0" priority="2130706431" id="ac8305d23716f9c9136bfe8b34d2e128018b7e93f" tcptype="passive" protocol="ssltcp" generation="0" port="4443"/><candidate foundation="2" component="1" type="host" ip="94.237.57.21" network="0" priority="2130706431" id="ac8305d23716f9c9136bfe8b34d2e1280ffffffffd6ef190f" tcptype="passive" protocol="ssltcp" generation="0" port="4443"/><candidate foundation="5" component="1" type="host" generation="0" priority="2113939711" id="ac8305d23716f9c9136bfe8b34d2e128018b7fef4" network="0" protocol="udp" ip="2a04:3541:1000:500:6866:a4ff:fe4c:2b05" port="10000"/><candidate foundation="6" component="1" type="host" generation="0" priority="2113932031" id="ac8305d23716f9c9136bfe8b34d2e1280ffffffffd6ef2ec4" network="0" protocol="udp" ip="94.237.57.21" port="10000"/></transport><bundle xmlns="http://estos.de/ns/bundle"/></content><content creator="initiator" name="video" senders="both"><description xmlns="urn:xmpp:jingle:apps:rtp:1" media="video"><payload-type clockrate="90000" id="100" name="VP8"><rtcp-fb xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0" type="ccm" subtype="fir"/><rtcp-fb type="nack" xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"/><rtcp-fb xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0" type="nack" subtype="pli"/><parameter value="800" name="x-google-start-bitrate"/><rtcp-fb type="transport-cc" xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"/></payload-type><payload-type clockrate="90000" id="107" name="H264"><rtcp-fb xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0" type="ccm" subtype="fir"/><rtcp-fb type="nack" xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"/><rtcp-fb xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0" type="nack" subtype="pli"/><parameter value="800" name="x-google-start-bitrate"/><rtcp-fb type="transport-cc" xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"/><parameter value="42e01f;level-asymmetry-allowed=1;packetization-mode=1;" name="profile-level-id"/></payload-type><payload-type clockrate="90000" id="101" name="VP9"><rtcp-fb xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0" type="ccm" subtype="fir"/><rtcp-fb type="nack" xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"/><rtcp-fb xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0" type="nack" subtype="pli"/><parameter value="800" name="x-google-start-bitrate"/><rtcp-fb type="transport-cc" xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"/></payload-type><rtp-hdrext uri="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time" id="3" xmlns="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0"/><rtp-hdrext uri="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01" id="5" xmlns="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0"/><rtcp-mux/><source ssrc="1935160571" xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"><parameter value="mixed" name="cname"/><parameter value="mixedlabelvideo0" name="label"/><parameter value="mixedmslabel mixedlabelvideo0" name="msid"/><parameter value="mixedmslabel" name="mslabel"/><ssrc-info owner="jvb" xmlns="http://jitsi.org/jitmeet"/></source></description><transport ufrag="6ddqb1e4oq7oc3" pwd="4f734prgpajhk53aqjovijirf" xmlns="urn:xmpp:jingle:transports:ice-udp:1"><rtcp-mux/><fingerprint hash="sha-1" xmlns="urn:xmpp:jingle:apps:dtls:0" required="false" setup="actpass">75:2F:1A:44:CD:9F:61:3B:57:52:3D:A3:08:85:B5:F1:4B:4A:54:9C</fingerprint><candidate foundation="1" component="1" type="host" ip="2a04:3541:1000:500:6866:a4ff:fe4c:2b05" network="0" priority="2130706431" id="ac8305d23716f9c9136bfe8b34d2e128018b7e93f" tcptype="passive" protocol="ssltcp" generation="0" port="4443"/><candidate foundation="2" component="1" type="host" ip="94.237.57.21" network="0" priority="2130706431" id="ac8305d23716f9c9136bfe8b34d2e1280ffffffffd6ef190f" tcptype="passive" protocol="ssltcp" generation="0" port="4443"/><candidate foundation="5" component="1" type="host" generation="0" priority="2113939711" id="ac8305d23716f9c9136bfe8b34d2e128018b7fef4" network="0" protocol="udp" ip="2a04:3541:1000:500:6866:a4ff:fe4c:2b05" port="10000"/><candidate foundation="6" component="1" type="host" generation="0" priority="2113932031" id="ac8305d23716f9c9136bfe8b34d2e1280ffffffffd6ef2ec4" network="0" protocol="udp" ip="94.237.57.21" port="10000"/></transport><bundle xmlns="http://estos.de/ns/bundle"/></content><content creator="initiator" name="data" senders="both"><description xmlns="urn:xmpp:jingle:apps:rtp:1" media="application"><rtcp-mux/></description><transport ufrag="6ddqb1e4oq7oc3" pwd="4f734prgpajhk53aqjovijirf" xmlns="urn:xmpp:jingle:transports:ice-udp:1"><rtcp-mux/><fingerprint hash="sha-1" xmlns="urn:xmpp:jingle:apps:dtls:0" required="false" setup="actpass">75:2F:1A:44:CD:9F:61:3B:57:52:3D:A3:08:85:B5:F1:4B:4A:54:9C</fingerprint><sctpmap protocol="webrtc-datachannel" number="5000" xmlns="urn:xmpp:jingle:transports:dtls-sctp:1" streams="1024"/><candidate foundation="1" component="1" type="host" ip="2a04:3541:1000:500:6866:a4ff:fe4c:2b05" network="0" priority="2130706431" id="ac8305d23716f9c9136bfe8b34d2e128018b7e93f" tcptype="passive" protocol="ssltcp" generation="0" port="4443"/><candidate foundation="2" component="1" type="host" ip="94.237.57.21" network="0" priority="2130706431" id="ac8305d23716f9c9136bfe8b34d2e1280ffffffffd6ef190f" tcptype="passive" protocol="ssltcp" generation="0" port="4443"/><candidate foundation="5" component="1" type="host" generation="0" priority="2113939711" id="ac8305d23716f9c9136bfe8b34d2e128018b7fef4" network="0" protocol="udp" ip="2a04:3541:1000:500:6866:a4ff:fe4c:2b05" port="10000"/><candidate foundation="6" component="1" type="host" generation="0" priority="2113932031" id="ac8305d23716f9c9136bfe8b34d2e1280ffffffffd6ef2ec4" network="0" protocol="udp" ip="94.237.57.21" port="10000"/></transport><bundle xmlns="http://estos.de/ns/bundle"/></content><group xmlns="urn:xmpp:jingle:apps:grouping:0" semantics="BUNDLE"><content name="audio"/><content name="video"/><content name="data"/></group><bridge-session id="fff905_109a6b" xmlns="http://jitsi.org/protocol/focus"/></jingle></body>`));